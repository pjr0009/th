-# Hide header in map view if mobile
%header.header
  .header-wrapper
    
    .header-right.visible-tablet
 
    - if logged_in
      .header-right
        = render :partial => "layouts/header_anchors", locals: {avatar_url: avatar_url, current_user_name: current_user_name, icons: icons}
        = render :partial => "layouts/header_user_menu", locals: {unread_count: unread_count, inbox_path: inbox_path, profile_path: profile_path, manage_listings_path: manage_listings_path, settings_path: settings_path, logout_path: logout_path, icons: icons}

      = render :partial => "layouts/header_right_visible_tablet", locals: {unread_count: unread_count, inbox_path: inbox_path, icons: icons}

    - unless logged_in
      .header-right
        = link_to login_path, class: "header-text-link header-hover", id: "header-login-link" do
          = t("header.login")
      .header-right
        = link_to sign_up_path, class: "header-text-link header-hover" do
          = t("header.signup")
    .header-right.header-padding.visible-tablet
      = link_to "Sell", new_listing_path, :class => "new-listing-link", :id => "new-listing-link"
    .header-right
      = link_to "News", news_index_path, :class => "header-text-link header-hover"  

  

    .header-left.hidden-tablet
      .header-menu-container.toggle.hidden{data: {toggle: '#header-menu-toggle-menu', 'toggle-position' => 'absolute'}}
        #header-menu-mobile-anchor.header-menu-toggle-container.toggle-header-container
          %i.icon-reorder
          %span.visible-tablet-inline
            = t("header.menu")

    = render :partial => "layouts/header_menu", locals: { return_after_locale_change: return_after_locale_change, available_locales: available_locales, icons: icons}

    -#
      If necessary, the buttons will overlap with the logo. Buttons should be on top, that's
      keep the logo here after buttons
    .header-left.header-logo-container
      = link_to search_path, :class => "header-logo", :id => "header-logo" do
        %i.header-square-logo.hidden-tablet
          -# Logo is here, it's a CSS background
     
        %i.header-wide-logo.visible-tablet
          -# Logo is here, it's a CSS background
    .header-left.header-search.cf-clearfix.visible-tablet
      %form{method: "get", id: "homepage-filters", action: "/"}
        - params.except("action", "controller", "q", "lc", "ls", "view", "utf8", "boundingbox", "distance_max").each do |param, value|
          - unless param.match(/^filter_option/) || param.match(/^checkbox_filter_option/) || param.match(/^nf_/) || param.match(/^price_/)
            = hidden_field_tag param, value
        = text_field_tag "q", params[:q], :placeholder => "Search for tack..."
        %button{:type => "submit"}
          = icon_tag("search", ["icon-part"])
