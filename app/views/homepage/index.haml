- content_for :javascript do
  initialize_homepage();

- content_for :coverfade_class do
  = "without-text"
- if @selected_category
  - content_for :title, @selected_category.name
  - content_for :keywords, @selected_category.children.map{|c| c.name}.join(", ")
  - content_for :meta_description, "Find Great Deals On New And Used #{@selected_category.name}"
- #schema markup for homepage search in SERPS
- content_for :extra_javascript do
  :plain
    <script type="application/ld+json">
      {
         "@context": "http://schema.org",
         "@type": "WebSite",
         "url": "https://www.tackhunter.com/",
         "potentialAction": {
           "@type": "SearchAction",
           "target": "https://www.tackhunter.com/?q={search_term_string}",
           "query-input": "required name=search_term_string"
         }
      }
    </script>


- content_for :sidenav_left do
  .row
    .col-12
      %md-list
        .md-subheader.bg-body
          .md-subheader-content
            .md-subheader-inner
              Categories
        - @main_categories.each do |category|
          - selected_category_class = (@selected_category && @selected_category.id == category.id) ? 'font-weight: 700' : ''
          %md-list-item.layout-column{role: "listItem", style: "margin: 0; padding: 0; min-height: 36px;"}
            %a.md-no-style.md-ink-ripple.md-button{href: "/#{@discipline.slug}/#{category.url}", style: "padding: 0; margin: 0;"} 
              .md-list-item-inner{style: "font-size: 14px; margin: 0; padding: 0 24px; min-height: 36px; #{selected_category_class}"}
                = category.name
            - if (@selected_category && @selected_category.id == category.id) && !@discipline.categories.where(:parent_id => category.id).blank?
              %md-list.flex.layout-fill.layout-padding
                - @discipline.categories.where(:parent_id => category.id).each do |child|
                  - is_selected = @selected_category == child
                  %md-list-item.layout-column{role: "listItem", style: "margin: 0; padding: 0; min-height: 36px;"}
                    %a.md-no-style.md-ink-ripple.md-button{href: "/#{@discipline.slug}/#{child.url}", style: "padding: 0; margin: 0;"} 
                      .md-list-item-inner{style: "font-size: 14px; margin: 0; padding: 0 24px; min-height: 36px;"}
                        = child.name
      - if false
        %md-list
          .md-subheader.bg-body
            .md-subheader-content
              .md-subheader-inner
                Brands
          %md-divider
            - Brand.limit(10).in_groups_of(2).each do |brands|
              .layout-row{style: "transform: scale(0.9); -webkit-transform: scale(0.9);"}
                - brands.each do |brand|
                  %md-checkbox.flex
                    = brand.name

.row
  - if @listings.total_entries > 0
    %div{class: "home-fluid-thumbnail-grid-narrow"}
      .home-fluid-thumbnail-grid{:itemscope => "", :itemtype => "https://schema.org/ItemList"}
        = render partial: "homepage/grid_item", collection: @listings, as: :listing
    .home-loading-more
      = will_paginate(@listings)
  - else
    .home-no-listings
      - if params[:q] || params[:category] || params[:share_type] # Some filter in use
        = t(".no_listings_with_your_search_criteria")
      - else
        = t(".no_listings_notification",
              add_listing_link: link_to(t(".add_listing_link_text"),
              new_listing_path(ref: "add_listing_link"))).html_safe
