- content_for :extra_javascript do
  :javascript
    $(document).ready(function() {
      window.ST.initialize_new_listing_form_selectors("#{I18n.locale}", #{category_tree.to_json}, #{Discipline.all.to_json}, #{listing_form_menu_titles().to_json});
    });

- content_for :extra_javascript do
  - maps_key = @current_community.google_maps_key
  = javascript_include_tag "https://maps.googleapis.com/maps/api/js?key=AIzaSyBD0dCxEL8qLH4TLaRb5Hq76WR4V1ymtlI"

- content_for :title_header do
  %h1= t("listings.new.post_a_new_listing")
.row
  .col-12
    #new_listing_form.new-listing-form.centered-section

      #selected-groups
        .selected-group{:name => "discipline"}
          - Discipline.find_each do |value|
            %a.select.selected.hidden{:data => {:id => value.id}}
              .link-text= "Discipline: #{value.name}"
        - if categories.size > 1
          .selected-group{:name => "category"}
            - categories.each do |value|
              %a.select.selected.hidden{:data => {:id => value.id}}
                .link-text= t(".selected_category", :category => value.display_name(I18n.locale))

        - if subcategories.size > 1
          .selected-group{:name => "subcategory"}
            - subcategories.each do |value|
              %a.select.selected.hidden{:data => {:id => value.id}}
                .link-text= t(".selected_subcategory", :subcategory => value.display_name(I18n.locale))

        - if shapes.size > 1
          .selected-group{:name => "listing_shape"}
            - shapes.each do |value|
              %a.select.selected.hidden{:data => {:id => value[:id]}}
                .link-text= t(".selected_transaction_type", :transaction_type => t(value[:name_tr_key]))

      %h2.listing-form-title{:id => "foo"}

      #option-groups
        .option-group{:name => "discipline"}
          - Discipline.find_each do |value|
            %a.select.option.hidden{:data => {:id => value.id}}
              .link-text= value.name
        - if categories.size > 1
          .option-group{:name => "category"}
            - categories.each do |value|
              %a.select.option.hidden{:data => {:id => value.id}}
                .link-text= value.display_name(I18n.locale)

        - if subcategories.size > 1
          .option-group{:name => "subcategory"}
            - subcategories.each do |value|
              %a.select.option.hidden{:data => {:id => value.id}}
                .link-text= value.display_name(I18n.locale)

        - if shapes.size > 1
          .option-group{:name => "listing_shape"}
            - shapes.each do |value|
              %a.select.option.hidden{:data => {:id => value[:id]}}
                .link-text= t(value[:name_tr_key])

      .js-form-fields.hidden
